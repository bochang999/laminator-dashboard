# Ver.8.7 ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼å ±å‘Šæ›¸ï¼ˆä»–AIç›¸è«‡ç”¨ï¼‰

## ðŸš¨ ç™ºç”Ÿã—ãŸã‚¨ãƒ©ãƒ¼

### ã‚¨ãƒ©ãƒ¼æ¦‚è¦
**å ´æ‰€**: ã‚­ãƒ¼ã‚¹ãƒˆã‚¢ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹  
**ã‚¨ãƒ©ãƒ¼**: `Keystore file '/home/runner/work/laminator-dashboard/laminator-dashboard/android/app/app/release.keystore' not found`  
**åŽŸå› **: gradle.propertiesã®MY_STORE_FILEè¨­å®šã¨ã‚­ãƒ¼ã‚¹ãƒˆã‚¢å®Ÿéš›é…ç½®å…ˆã®ä¸æ•´åˆ

### å…·ä½“çš„ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
```
Execution failed for task ':app:validateSigningRelease'.
> Keystore file '/home/runner/work/laminator-dashboard/laminator-dashboard/android/app/app/release.keystore' not found for signing config 'release'.
```

**å•é¡Œ**: ãƒ‘ã‚¹ã«`app/app/`ãŒé‡è¤‡ã—ã¦ã„ã‚‹ï¼ˆæ­£ã—ãã¯`android/app/release.keystore`ï¼‰

## ðŸ“‹ ã“ã‚Œã¾ã§ã®ä¿®æ­£å±¥æ­´

### Ver.8.5ã‹ã‚‰ã®å•é¡Œè§£æ±ºçµŒç·¯
1. **Ver.8.5**: JDK17ã€SDKæœªæ‰¿èªã€gradlewä¸å­˜åœ¨ã§å¤±æ•—
2. **Ver.8.6**: JDK21ã€SDK35ã€gradlewå•é¡Œè§£æ±º â†’ AWKæ§‹æ–‡ã‚¨ãƒ©ãƒ¼ã§å¤±æ•—  
3. **Ver.8.7**: AWKæ§‹æ–‡é †åºä¿®æ­£ â†’ ã‚­ãƒ¼ã‚¹ãƒˆã‚¢ãƒ‘ã‚¹å•é¡Œã§å¤±æ•—ï¼ˆç¾åœ¨ï¼‰

### Ver.8.7ã§å®Ÿè£…ã—ãŸå†…å®¹

#### 1. JDK 17â†’21ã¸ã®æ›´æ–° âœ…ï¼ˆVer.8.6ã§è§£æ±ºæ¸ˆã¿ï¼‰
```yaml
env:
  JAVA_VERSION: '21'
- name: Setup Java
  with:
    java-version: '21'
```

#### 2. Android SDK API 35ã®æ˜Žç¤ºã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« âœ…ï¼ˆVer.8.6ã§è§£æ±ºæ¸ˆã¿ï¼‰
```yaml
- name: Install Android SDK packages
  run: |
    sdkmanager --install \
      "platforms;android-35" \
      "build-tools;35.0.0" \
      "platform-tools"
```

#### 3. SDKãƒ©ã‚¤ã‚»ãƒ³ã‚¹éžå¯¾è©±æ‰¿èª âœ…ï¼ˆVer.8.6ã§è§£æ±ºæ¸ˆã¿ï¼‰
```yaml
- name: Accept Android licenses (non-interactive)
  run: yes | sdkmanager --licenses
```

#### 4. Androidç”Ÿæˆã®é †åºä¸€æœ¬åŒ– âœ…ï¼ˆVer.8.6ã§è§£æ±ºæ¸ˆã¿ï¼‰
```yaml
- name: Initialize Capacitor (once only)
  run: |
    rm -rf capacitor.config.* android ios electron
    npx cap init "${{ env.APP_NAME }}" "${{ env.APP_ID }}" --web-dir="www"
    npx cap add android
```

#### 5. AWKæ§‹æ–‡é †åºä¿®æ­£ âœ…ï¼ˆVer.8.7ã§å®Ÿè£…ï¼‰
```yaml
# Ver.8.6ã®å•é¡Œ: å®šç¾©å‰å‚ç…§
/defaultConfig {/ â†’ signingConfig signingConfigs.release (å‚ç…§)
/buildTypes {/ â†’ signingConfigs {...} å®šç¾©

# Ver.8.7ã®ä¿®æ­£: æ­£ã—ã„é †åº
/android {/ â†’ signingConfigs {...} å®šç¾© (æœ€åˆ)
/defaultConfig {/ â†’ signingConfig signingConfigs.release (å‚ç…§)
```

#### 6. ç½²åè¨­å®šã®å•é¡Œ âŒï¼ˆVer.8.7ã§æ–°ãŸã«ç™ºè¦šï¼‰
```yaml
# ã‚­ãƒ¼ã‚¹ãƒˆã‚¢å¾©å…ƒï¼ˆæˆåŠŸï¼‰
echo "${{ secrets.KEYSTORE_B64 }}" | base64 -d > android/app/release.keystore

# gradle.propertiesè¨­å®šï¼ˆå•é¡Œç®‡æ‰€ï¼‰
cat >> android/gradle.properties <<'EOF'
MY_STORE_FILE=app/release.keystore  # â† ã“ã“ãŒå•é¡Œ
MY_STORE_PASSWORD=${{ secrets.KEYSTORE_PASSWORD }}
MY_KEY_ALIAS=${{ secrets.KEY_ALIAS }}
MY_KEY_PASSWORD=${{ secrets.KEY_PASSWORD }}
EOF
```

## ðŸ” Ver.8.7ã§ã®æ–°ãŸãªå•é¡Œ

### ã‚­ãƒ¼ã‚¹ãƒˆã‚¢ãƒ‘ã‚¹å•é¡Œã®è©³ç´°
1. **å®Ÿéš›ã®ã‚­ãƒ¼ã‚¹ãƒˆã‚¢é…ç½®**: `android/app/release.keystore`
2. **gradle.propertiesã®è¨­å®š**: `MY_STORE_FILE=app/release.keystore`  
3. **GradleãŒæŽ¢ã™ãƒ‘ã‚¹**: `android/app/` + `app/release.keystore` = `android/app/app/release.keystore`
4. **çµæžœ**: ãƒ‘ã‚¹ãŒ`app/app/`ã¨é‡è¤‡ã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚‰ãªã„

### ç’°å¢ƒæƒ…å ±ï¼ˆVer.8.7ãƒ“ãƒ«ãƒ‰æ™‚ï¼‰
```
NODE_VERSION: 20
JAVA_VERSION: 21
JAVA_HOME: /opt/hostedtoolcache/Java_Temurin-Hotspot_jdk/21.0.8-9/x64
ANDROID_HOME: /usr/local/lib/android/sdk
VERSION_TAG: 8.4.97
SIGNING_MODE: bootstrap-temporary
```

## ðŸ“Š æˆåŠŸã—ãŸéƒ¨åˆ†ï¼ˆVer.8.7ï¼‰

### âœ… æ­£å¸¸å‹•ä½œç¢ºèªæ¸ˆã¿
1. **Gradle 8.11.1**: æ­£å¸¸ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ»èµ·å‹•
2. **Javaç’°å¢ƒ**: JDK 21ã§å®Œå…¨å‹•ä½œ
3. **Android SDK**: API 35ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æˆåŠŸ
4. **Capacitor**: android/gradlewæ­£å¸¸ç”Ÿæˆ
5. **ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«**: å…¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®Java/Kotlinã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æˆåŠŸ
6. **ãƒªã‚½ãƒ¼ã‚¹å‡¦ç†**: ã‚¢ã‚¤ã‚³ãƒ³ãƒ»ãƒªã‚½ãƒ¼ã‚¹ãƒ»ãƒžãƒ‹ãƒ•ã‚§ã‚¹ãƒˆå‡¦ç†å®Œäº†
7. **ç½²åè¨­å®šæ³¨å…¥**: AWKæ§‹æ–‡ã‚¨ãƒ©ãƒ¼è§£æ±ºã€æ­£å¸¸æ³¨å…¥
8. **ã‚­ãƒ¼ã‚¹ãƒˆã‚¢ãƒ•ã‚¡ã‚¤ãƒ«**: `android/app/release.keystore`ã«æ­£å¸¸ä½œæˆ

### âŒ å¤±æ•—ã—ãŸéƒ¨åˆ†
- **validateSigningRelease**: ãƒ‘ã‚¹è¨­å®šãƒŸã‚¹ã«ã‚ˆã‚Šã‚­ãƒ¼ã‚¹ãƒˆã‚¢ç™ºè¦‹ä¸å¯

## ðŸ› ï¸ å¿…è¦ãªä¿®æ­£å†…å®¹

### ã‚­ãƒ¼ã‚¹ãƒˆã‚¢ãƒ‘ã‚¹ä¿®æ­£ãŒå¿…è¦
```yaml
# ç¾åœ¨ï¼ˆå•é¡Œï¼‰
MY_STORE_FILE=app/release.keystore

# ä¿®æ­£æ¡ˆ1: ç›¸å¯¾ãƒ‘ã‚¹ä¿®æ­£
MY_STORE_FILE=release.keystore

# ä¿®æ­£æ¡ˆ2: çµ¶å¯¾ãƒ‘ã‚¹æŒ‡å®š  
MY_STORE_FILE=/home/runner/work/laminator-dashboard/laminator-dashboard/android/app/release.keystore

# ä¿®æ­£æ¡ˆ3: ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªè€ƒæ…®
MY_STORE_FILE=../app/release.keystore
```

## ðŸŽ¯ ç¾åœ¨ã®çŠ¶æ³ã¾ã¨ã‚

### è§£æ±ºæ¸ˆã¿å•é¡Œï¼ˆ5/6ï¼‰
1. âœ… JDK 17â†’21: å®Œå…¨è§£æ±º
2. âœ… Android SDK API 35: å®Œå…¨è§£æ±º  
3. âœ… SDKãƒ©ã‚¤ã‚»ãƒ³ã‚¹: å®Œå…¨è§£æ±º
4. âœ… gradlewä¸å­˜åœ¨: å®Œå…¨è§£æ±º
5. âœ… AWKæ§‹æ–‡ã‚¨ãƒ©ãƒ¼: å®Œå…¨è§£æ±º

### æ®‹ã‚Šå•é¡Œï¼ˆ1/6ï¼‰
6. âŒ ã‚­ãƒ¼ã‚¹ãƒˆã‚¢ãƒ‘ã‚¹è¨­å®š: MY_STORE_FILEè¨­å®šã®ä¿®æ­£ãŒå¿…è¦

### æœŸå¾…ã•ã‚Œã‚‹æ¬¡ã‚¹ãƒ†ãƒƒãƒ—
Ver.8.8ã§ã‚­ãƒ¼ã‚¹ãƒˆã‚¢ãƒ‘ã‚¹è¨­å®šã‚’ä¿®æ­£ã™ã‚Œã°ã€å…¨6å•é¡ŒãŒè§£æ±ºã•ã‚Œã€APKãƒ“ãƒ«ãƒ‰æˆåŠŸã®è¦‹è¾¼ã¿ã€‚

## ðŸ“ æŠ€è¡“çš„è©³ç´°

### å®Ÿè¡Œã•ã‚ŒãŸAWKã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆVer.8.7ï¼‰
```awk
/android {/ { 
    print; 
    print "    signingConfigs {"; 
    print "        release {"; 
    print "            storeFile file(MY_STORE_FILE)"; 
    print "            storePassword MY_STORE_PASSWORD"; 
    print "            keyAlias MY_KEY_ALIAS"; 
    print "            keyPassword MY_KEY_PASSWORD"; 
    print "        }"; 
    print "    }"; 
    print ""; 
    next 
}
/defaultConfig {/ { 
    print; 
    print "        signingConfig signingConfigs.release"; 
    next 
}
/buildTypes {/ && /release {/ {
    print;
    getline;
    print "            signingConfig signingConfigs.release";
    print;
    next
}
```

ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯æ­£å¸¸ã«å‹•ä½œã—ã€Gradleæ§‹æ–‡ã‚¨ãƒ©ãƒ¼ã¯å®Œå…¨ã«è§£æ±ºã•ã‚ŒãŸã€‚

### Gradleãƒ“ãƒ«ãƒ‰é€²è¡ŒçŠ¶æ³
- **Configure project**: æˆåŠŸ
- **Taskå®Ÿè¡Œ**: 209ã‚¿ã‚¹ã‚¯ä¸­203å®Ÿè¡Œã€6ã‚¹ã‚­ãƒƒãƒ—
- **ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«**: å…¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æˆåŠŸ
- **ãƒªã‚½ãƒ¼ã‚¹å‡¦ç†**: å®Œäº†
- **å¤±æ•—ç®‡æ‰€**: validateSigningReleaseã‚¿ã‚¹ã‚¯ã®ã¿

## ðŸ’¡ ä»–AIã¸ã®ç›¸è«‡ãƒã‚¤ãƒ³ãƒˆ

1. **ã‚­ãƒ¼ã‚¹ãƒˆã‚¢ãƒ‘ã‚¹è¨­å®šã®æœ€é©è§£**: MY_STORE_FILEã®æ­£ã—ã„è¨­å®šæ–¹æ³•
2. **Gradleä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª**: android/app/build.gradleå®Ÿè¡Œæ™‚ã®ç›¸å¯¾ãƒ‘ã‚¹åŸºæº–
3. **Capacitorç½²åè¨­å®š**: Capacitorãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®æ¨™æº–çš„ãªã‚­ãƒ¼ã‚¹ãƒˆã‚¢é…ç½®
4. **ä»£æ›¿ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**: AWKã«ã‚ˆã‚‹å‹•çš„æ³¨å…¥ä»¥å¤–ã®ç½²åè¨­å®šæ–¹æ³•

Ver.8.5ã€œ8.7ã§æ®µéšŽçš„ã«å•é¡Œã‚’è§£æ±ºã—ã¦ãã¦ãŠã‚Šã€æœ€å¾Œã®1å•é¡Œã®è§£æ±ºã§å®Œå…¨å¾©æ—§ã®è¦‹è¾¼ã¿ã€‚